---
title: CF543D && CF369C
tags: 
 - codeforces
 - tree
mathjax: true
---

树是什么？能吃吗

<!--more-->

>**CF543D**输入给出N和一些边的关系$(p2，p3，p4……pn）$表示$i$和$p_i$有连边.对于以i为根时，把树边黑白染色，使得任意点走到根的路径上不超过一条黑边，输出染色的方案数(mod 1e9+7)

​	考虑树形DP，在以1为根的前提下，设$f[i]$表示以i为根的**子树**的$Ans$。容易得到

​	$\Large f[i] = \prod _{j}^{}(f[j]+1)$

​	那么我们第二次DFS的时候，得到一个节点在以1为根的大树中，上面连通的哪些的$Ans$。注意到，要处理逆元。但是，可能出现0，但是不能算无解。应该重新跑一遍去算。

> **CF369C**:给出一棵以1为根的树，形式是从节点2开始给出每个节点的父亲节点；然后是$q$次操作，操作分为两种，$1$,$v$,$x$,$k$，表示在以v为根的子树上添加，对于所有其它与$v$节点的距离为$i$的点$v$节点的后代，加上$x-i*k$；$2$,$v$查询节点v的值(对1e9+7取模)。一开始都是0,$n,q<=3*10^5$
