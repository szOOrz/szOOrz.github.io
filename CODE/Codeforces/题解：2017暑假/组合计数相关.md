---
title: CF组合计数相关
tags:
 - codeforces
 - 组合计数
mathjax: true
---

我为我**听说过**排列组合而感到高兴。

<!--more-->

> **CF57C:**给你一个数n，表示有n个数的序列，每个数范围为[1,n]，叫你求所有非降和非升序列的个数。

​	考虑到答案是$\large 2\times C(2\times n-1,n)-n$。

​	引用一段网上的：我们在满足条件的n个数之前加一个虚节点1，在第n个数之后加一个虚节点n，那么考虑这n+2个数组成的非降序列：假设序列里的第i个数为a[i]，我们设$\large xi=a[i+1]-a[i]+1$，$\large 1<=i<=n+1$，则满足每个数>=1,且$\Large \sum_{i=1}^{n+1}x[i]=2\times n$；那么相当于求将2*n分成n个部分，且每个部分的值大于等于1，则易得非降序列总数为：$(\Large_n^{2\times n-1})（2\times n-1 选 n）$

​	以后慢慢看吧。（估计不会来看了）

> **CF40E:**给出一个n×m的矩阵，每个元素都是1或−1，其中有k个位置元素已经确定，并且这个矩阵满足每一行、每一列元素的乘积都是−1，问有多少种不同的矩阵。$1≤n,m≤1000,0≤k<max(n,m)。$，答案对$P$取模。

​	首先，行的1要满足$(-1)^n$和$(-1)^m$是相等的（所有的格子的乘积）——所以当n和m不是同奇偶的时候，就无解。

​	注意到$0<=k<max(n,m)$，**说明必然有一行（或者一列）是空的**。（我们只讨论行是空的，列的不管，转化就行了）那么这一行有什么用的?

​	如果我们考虑到，其它行的原先是-1还是1能算出来，然后得到满足每一行的情况。（通过组合），那么这个空的行一定是固定的——用来满足列的需求。

​	所以答案是除了这个空行，剩下的每一行独立的情况乘起来。

> **CF830D:**给定n，现有深度为n的满二叉树，对于一个节点，给它与它的所有父亲连一条边。 问：得到的新的图有多少条不同的简单路径（1->2和2->1算不同路径）答案$$\mod (1,000,000,007) n≤400$$

​	fi,j表示从i-house中选出j条不相交的路径的方案数，那么答案就是fk,1 
​	i-house可以从两个i-1-house中转移过来 	
​	枚举fi−1,j和fi−1,k 
​	如果让根成为单独的一条路径，那么fi,j+k+1+=fi−1,j×fi−1,k 
​	如果不选根，那么fi,j+k+=fi−1,j×fi−1,k 
​	让根与左儿子中的一条路径结合或和右儿子中的一条路径结合，那么fi,j+k+=fi−1,j×fi−1,k×2×(j+k) 
​	从j+k条边中选出两条，让这两条边与根结合形成新的一条边，那么$f_{i,j+k−1}+=f_{i−1,j}×_{fi−1,k}×C^2_{j+k}\times2$

​	然后因为答案是$f_{k,1}$切每次转移第二位最多减一，所以$j$,$k$只要枚举到$k$就行了。这样复杂度是$n^3$的。 